import{r as j,a as he,R as ge}from"./vendor-react-KfUPlHYY.js";import{R as W,C as fe,a as Q,X as q,Y as G,T as V,L as X,A as re,b as O,c as xe,d as le,B as je,e as ne,P as be,f as ye,g as ve}from"./vendor-recharts-haCkjrkJ.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const m of i)if(m.type==="childList")for(const u of m.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&c(u)}).observe(document,{childList:!0,subtree:!0});function a(i){const m={};return i.integrity&&(m.integrity=i.integrity),i.referrerPolicy&&(m.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?m.credentials="include":i.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function c(i){if(i.ep)return;i.ep=!0;const m=a(i);fetch(i.href,m)}})();var me={exports:{}},Y={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ke=j,Ne=Symbol.for("react.element"),we=Symbol.for("react.fragment"),$e=Object.prototype.hasOwnProperty,Pe=ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Se={key:!0,ref:!0,__self:!0,__source:!0};function pe(t,s,a){var c,i={},m=null,u=null;a!==void 0&&(m=""+a),s.key!==void 0&&(m=""+s.key),s.ref!==void 0&&(u=s.ref);for(c in s)$e.call(s,c)&&!Se.hasOwnProperty(c)&&(i[c]=s[c]);if(t&&t.defaultProps)for(c in s=t.defaultProps,s)i[c]===void 0&&(i[c]=s[c]);return{$$typeof:Ne,type:t,key:m,ref:u,props:i,_owner:Pe.current}}Y.Fragment=we;Y.jsx=pe;Y.jsxs=pe;me.exports=Y;var e=me.exports,Z={},ie=he;Z.createRoot=ie.createRoot,Z.hydrateRoot=ie.hydrateRoot;function _e({metrics:t,theme:s="dark"}){const[a,c]=j.useState([]),i=j.useRef(0),m=j.useRef({uplink:0,downlink:0}),[u,b]=j.useState(!0),[C,d]=j.useState("throughput"),k=s==="dark"?"#334155":"#e2e8f0",p=s==="dark"?"#64748b":"#94a3b8",N=s==="dark"?"#1e293b":"#ffffff",g=s==="dark"?"#334155":"#e2e8f0",_=s==="dark"?"#e2e8f0":"#1e293b",S=s==="dark"?"text-slate-400":"text-gray-500",w=s==="dark"?"bg-slate-700/30":"bg-gray-100",l=s==="dark"?"bg-slate-700":"bg-gray-200",y=s==="dark"?"text-slate-400 hover:text-white":"text-gray-600 hover:text-gray-900";j.useEffect(()=>{const P=Date.now();if(P-i.current<900)return;i.current=P;const h=new Date().toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),f=t.uplink.throughput_mbps,n=t.downlink.throughput_mbps,r=t.uplink.packets-m.current.uplink,v=t.downlink.packets-m.current.downlink;m.current={uplink:t.uplink.packets,downlink:t.downlink.packets};const o=Math.max(f,n);o>.1?b(!1):o<.01&&a.every(x=>x.uplink<100&&x.downlink<100)&&b(!0),c(x=>{const T=u?1e3:1,L=f*T,R=n*T,B={time:h,timestamp:P,uplink:Math.round(L*1e4)/1e4,downlink:Math.round(R*1e4)/1e4,uplinkPkts:r>0?r:0,downlinkPkts:v>0?v:0};(f>0||n>0)&&console.log(`TrafficChart: raw=${f.toFixed(6)}/${n.toFixed(6)} Mbps, display=${B.uplink}/${B.downlink} ${u?"Kbps":"Mbps"}`);const E=[...x,B];return E.length>60?E.slice(-60):E})},[t,u]);const $=j.useMemo(()=>{if(a.length===0)return null;const P=a.map(r=>r.uplink),h=a.map(r=>r.downlink),f=a.map(r=>r.uplinkPkts),n=a.map(r=>r.downlinkPkts);return{uplink:{avg:P.reduce((r,v)=>r+v,0)/P.length,max:Math.max(...P),min:Math.min(...P.filter(r=>r>0)||[0]),current:P[P.length-1]||0},downlink:{avg:h.reduce((r,v)=>r+v,0)/h.length,max:Math.max(...h),min:Math.min(...h.filter(r=>r>0)||[0]),current:h[h.length-1]||0},packets:{uplinkTotal:f.reduce((r,v)=>r+v,0),downlinkTotal:n.reduce((r,v)=>r+v,0),uplinkAvg:f.reduce((r,v)=>r+v,0)/f.length,downlinkAvg:n.reduce((r,v)=>r+v,0)/n.length}}},[a]),F=j.useMemo(()=>{if(a.length===0)return[0,1];const P=C==="packets"?a.flatMap(n=>[n.uplinkPkts,n.downlinkPkts]):a.flatMap(n=>[n.uplink,n.downlink]),h=Math.max(...P,.001);let f;return C==="packets"?h<=10?f=10:h<=50?f=50:h<=100?f=100:h<=500?f=500:h<=1e3?f=1e3:f=Math.ceil(h/500)*500:u?h<=.1?f=.5:h<=.5?f=1:h<=1?f=2:h<=2?f=5:h<=5?f=10:h<=10?f=20:h<=20?f=50:h<=50?f=100:h<=100?f=200:h<=200?f=500:h<=500?f=1e3:f=Math.ceil(h/500)*500:h<=.1?f=.1:h<=.5?f=.5:h<=1?f=1:h<=2?f=2:h<=5?f=5:h<=10?f=10:h<=20?f=20:h<=50?f=50:h<=100?f=100:f=Math.ceil(h/50)*50,[0,f]},[a,u,C]),D=(P,h)=>a.length<=10?P:h%10===0||h===a.length-1?P.slice(0,5):"";if(a.length<2)return e.jsx("div",{className:"h-64 flex items-center justify-center text-slate-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-pulse mb-2",children:"üìä"}),e.jsx("p",{children:"Collecting data..."})]})});const M=C==="packets"?"pps":u?"Kbps":"Mbps";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-sm ${S}`,children:"View:"}),e.jsx("div",{className:`flex ${l} rounded-lg p-1`,children:["throughput","packets","combined"].map(P=>e.jsx("button",{onClick:()=>d(P),className:`px-3 py-1 text-sm rounded-md transition-colors ${C===P?"bg-blue-500 text-white":y}`,children:P==="throughput"?"üìà Throughput":P==="packets"?"üì¶ Packets":"üìä Combined"},P))})]}),$&&e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:S,children:"UL:"}),e.jsx("span",{className:"text-green-400 font-mono",children:C==="packets"?`${$.packets.uplinkAvg.toFixed(0)} pps`:`${$.uplink.current.toFixed(2)} ${M}`}),e.jsxs("span",{className:`text-xs ${s==="dark"?"text-slate-500":"text-gray-400"}`,children:["(avg: ",$.uplink.avg.toFixed(2),")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:S,children:"DL:"}),e.jsx("span",{className:"text-blue-400 font-mono",children:C==="packets"?`${$.packets.downlinkAvg.toFixed(0)} pps`:`${$.downlink.current.toFixed(2)} ${M}`}),e.jsxs("span",{className:`text-xs ${s==="dark"?"text-slate-500":"text-gray-400"}`,children:["(avg: ",$.downlink.avg.toFixed(2),")"]})]})]})]}),e.jsx("div",{className:"h-56",children:e.jsx(W,{width:"100%",height:"100%",children:C==="combined"?e.jsxs(fe,{data:a,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(Q,{strokeDasharray:"3 3",stroke:k}),e.jsx(q,{dataKey:"time",stroke:p,fontSize:11,tickLine:!1,tickFormatter:D,interval:0}),e.jsx(G,{yAxisId:"left",stroke:p,fontSize:12,tickLine:!1,axisLine:!1,domain:F,label:{value:M,angle:-90,position:"insideLeft",style:{fill:p,fontSize:11}}}),e.jsx(G,{yAxisId:"right",orientation:"right",stroke:p,fontSize:12,tickLine:!1,axisLine:!1,label:{value:"pps",angle:90,position:"insideRight",style:{fill:p,fontSize:11}}}),e.jsx(V,{contentStyle:{backgroundColor:N,border:`1px solid ${g}`,borderRadius:"8px"},labelStyle:{color:_}}),e.jsx(X,{}),e.jsx(re,{yAxisId:"left",type:"monotone",dataKey:"uplink",fill:"#22c55e",fillOpacity:.2,stroke:"#22c55e",strokeWidth:2,name:`‚Üë UL (${M})`}),e.jsx(re,{yAxisId:"left",type:"monotone",dataKey:"downlink",fill:"#3b82f6",fillOpacity:.2,stroke:"#3b82f6",strokeWidth:2,name:`‚Üì DL (${M})`}),e.jsx(O,{yAxisId:"right",type:"monotone",dataKey:"uplinkPkts",stroke:"#86efac",strokeWidth:1,strokeDasharray:"5 5",dot:!1,name:"‚Üë UL pps"}),e.jsx(O,{yAxisId:"right",type:"monotone",dataKey:"downlinkPkts",stroke:"#93c5fd",strokeWidth:1,strokeDasharray:"5 5",dot:!1,name:"‚Üì DL pps"})]}):e.jsxs(xe,{data:a,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(Q,{strokeDasharray:"3 3",stroke:k}),e.jsx(q,{dataKey:"time",stroke:p,fontSize:11,tickLine:!1,tickFormatter:D,interval:0,tick:{fill:p}}),e.jsx(G,{stroke:p,fontSize:12,tickLine:!1,axisLine:!1,domain:F,tickFormatter:P=>`${P}`,width:50,label:{value:M,angle:-90,position:"insideLeft",style:{fill:p,fontSize:11}}}),$&&C==="throughput"&&e.jsxs(e.Fragment,{children:[e.jsx(le,{y:$.uplink.avg,stroke:"#22c55e",strokeDasharray:"3 3",strokeOpacity:.5}),e.jsx(le,{y:$.downlink.avg,stroke:"#3b82f6",strokeDasharray:"3 3",strokeOpacity:.5})]}),e.jsx(V,{contentStyle:{backgroundColor:N,border:`1px solid ${g}`,borderRadius:"8px"},labelStyle:{color:_},formatter:(P,h)=>[C==="packets"?`${P} pps`:`${P.toFixed(3)} ${M}`,h]}),e.jsx(X,{}),e.jsx(O,{type:"monotone",dataKey:C==="packets"?"uplinkPkts":"uplink",stroke:"#22c55e",strokeWidth:2,dot:!1,name:"‚Üë Uplink",isAnimationActive:!1}),e.jsx(O,{type:"monotone",dataKey:C==="packets"?"downlinkPkts":"downlink",stroke:"#3b82f6",strokeWidth:2,dot:!1,name:"‚Üì Downlink",isAnimationActive:!1})]})})}),$&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{className:`${w} rounded-lg p-2`,children:[e.jsx("div",{className:`text-xs ${s==="dark"?"text-slate-500":"text-gray-400"}`,children:"Peak Uplink"}),e.jsxs("div",{className:"text-green-400 font-mono",children:[$.uplink.max.toFixed(2)," ",M]})]}),e.jsxs("div",{className:`${w} rounded-lg p-2`,children:[e.jsx("div",{className:`text-xs ${s==="dark"?"text-slate-500":"text-gray-400"}`,children:"Peak Downlink"}),e.jsxs("div",{className:"text-blue-400 font-mono",children:[$.downlink.max.toFixed(2)," ",M]})]}),e.jsxs("div",{className:`${w} rounded-lg p-2`,children:[e.jsx("div",{className:`text-xs ${s==="dark"?"text-slate-500":"text-gray-400"}`,children:"UL Packets (60s)"}),e.jsx("div",{className:"text-green-400/80 font-mono",children:$.packets.uplinkTotal.toLocaleString()})]}),e.jsxs("div",{className:`${w} rounded-lg p-2`,children:[e.jsx("div",{className:`text-xs ${s==="dark"?"text-slate-500":"text-gray-400"}`,children:"DL Packets (60s)"}),e.jsx("div",{className:"text-blue-400/80 font-mono",children:$.packets.downlinkTotal.toLocaleString()})]})]})]})}const ee={NO_PDR_MATCH:{code:"0",name:"No PDR Match",description:"Packet Detection Rule (PDR) not found for this packet. The UPF cannot determine how to process the packet.",impact:"Packet is dropped. User may experience connection timeout or data loss.",possibleCauses:["PDU Session not fully established","PFCP Session Establishment incomplete","SMF failed to create PDR in UPF","Stale session - PDR already deleted","Race condition during handover","Configuration mismatch between SMF and UPF"],suggestedActions:["Check SMF logs for PFCP errors","Verify PDU Session state in AMF","Check if UE registration is complete","Review SMF-UPF PFCP association status","Check gtp5g kernel module logs: dmesg | grep gtp5g"],severity:"critical",layer:"PFCP"},INVALID_TEID:{code:"1",name:"Invalid TEID",description:"Tunnel Endpoint Identifier (TEID) is unknown or no longer valid. The GTP tunnel cannot be found.",impact:"GTP packets cannot be processed. Complete connection failure for affected UE.",possibleCauses:["Session deleted but packets still in flight","TEID not yet allocated by SMF","gNB handover in progress - old TEID invalid","UPF restart lost TEID mapping","Malicious packet with fake TEID","PFCP Session Modification failed"],suggestedActions:["Check if PDU Session is active","Verify TEID allocation in SMF logs","Check for recent handover events","Verify UPF session table: look for SEID/TEID mappings","Review gtp5g tunnel list: cat /proc/gtp5g/*/tunnel"],severity:"critical",layer:"GTP"},QOS_VIOLATION:{code:"2",name:"QoS Violation",description:"Packet exceeds QoS policy limits (MBR/GBR thresholds or QFI mismatch).",impact:"Packet dropped to enforce QoS. May cause temporary throughput reduction.",possibleCauses:["User exceeded Maximum Bit Rate (MBR)","Traffic burst exceeds token bucket limit","QFI mismatch between packet and QoS rule","Congestion control activated","Rate limiting policy enforced"],suggestedActions:["Check session QoS parameters (MBR/GBR)","Review traffic patterns for the UE","Verify QER (QoS Enforcement Rule) configuration","Check if higher bandwidth subscription is needed","Review QoS flow settings in SMF"],severity:"warning",layer:"QoS"},KERNEL_DROP:{code:"3",name:"Kernel Drop",description:"Generic kernel-level packet drop. This can occur at various stages of packet processing.",impact:"Variable impact depending on the specific kernel drop point.",possibleCauses:["Netfilter/iptables rule blocked packet","Conntrack table full","Socket buffer overflow","Memory pressure","Rate limiting by kernel","Invalid packet checksum"],suggestedActions:["Check iptables rules: iptables -L -n -v","Monitor conntrack: conntrack -L | wc -l","Check system memory: free -h","Review dmesg for kernel warnings","Check network interface drops: ip -s link"],severity:"warning",layer:"Kernel"},NO_FAR_ACTION:{code:"4",name:"No FAR Action",description:"Forwarding Action Rule (FAR) not found or incomplete. UPF does not know where to forward the packet.",impact:"Packet cannot be forwarded. Similar impact to NO_PDR_MATCH.",possibleCauses:["FAR not yet created by SMF","FAR deleted before packet arrival","PFCP Session incomplete","Configuration error in SMF policy"],suggestedActions:["Check SMF PFCP session state","Verify FAR creation in SMF logs","Review PFCP Session Establishment messages","Check UPF session configuration"],severity:"critical",layer:"PFCP"},BUFFER_OVERFLOW:{code:"5",name:"Buffer Overflow",description:"Ring buffer or packet queue is full. System cannot process packets fast enough.",impact:"Multiple packets dropped. May indicate system overload.",possibleCauses:["High traffic load exceeding capacity","CPU bottleneck on UPF","Ring buffer size too small","Slow downstream processing","Memory allocation failures"],suggestedActions:["Monitor CPU usage on UPF server","Consider scaling UPF horizontally","Increase ring buffer size if possible","Check for slow packet processing: perf top","Review network interface queue length"],severity:"critical",layer:"Kernel"},TTL_EXPIRED:{code:"6",name:"TTL Expired",description:"IP Time-To-Live reached zero. Packet hopped through too many routers.",impact:"Packet dropped. May indicate routing loop or misconfigured network.",possibleCauses:["Routing loop in network","Packet initially sent with low TTL","Misconfigured static routes","Traceroute or path discovery packet"],suggestedActions:["Check routing table: ip route show","Trace the packet path: traceroute","Look for routing loops in network","Verify default gateway configuration"],severity:"warning",layer:"Routing"},MTU_EXCEEDED:{code:"7",name:"MTU Exceeded",description:"Packet size exceeds Maximum Transmission Unit. GTP encapsulation adds overhead.",impact:"Large packets dropped. May affect applications sending large data chunks.",possibleCauses:["Application sending jumbo frames","Path MTU discovery failed","GTP overhead not accounted for","DF (Don't Fragment) bit set","MTU mismatch between network segments"],suggestedActions:["Check interface MTU: ip link show","Verify GTP tunnel MTU (typically 1400 for GTP-U)","Enable Path MTU Discovery","Configure proper MTU on UE/gNB","Consider TCP MSS clamping"],severity:"warning",layer:"GTP"},MALFORMED_GTP:{code:"8",name:"Malformed GTP Header",description:"GTP-U packet header is corrupted or invalid. Cannot parse GTP protocol fields.",impact:"Packet dropped. May indicate network corruption or attack.",possibleCauses:["Packet corruption in transit","Buggy gNB/UPF implementation","Protocol version mismatch","Malicious packet injection","Hardware failure causing bit errors"],suggestedActions:["Capture packets for analysis: tcpdump -i any port 2152","Check for network hardware issues","Verify gNB software version","Review GTP-U packet structure","Check interface error counters: ethtool -S"],severity:"critical",layer:"GTP"},NO_GTP_TUNNEL:{code:"9",name:"No GTP Tunnel",description:"GTP tunnel does not exist in gtp5g kernel module. Tunnel endpoint not established.",impact:"Cannot process GTP packets. Complete data path failure.",possibleCauses:["PDU Session not established","Tunnel deleted during UE mobility","gtp5g module restart lost state","PFCP FAR missing Outer Header Creation","N3 interface not configured properly"],suggestedActions:["Check gtp5g tunnels: cat /proc/gtp5g/*/tunnel","Verify upfgtp interface exists: ip link show upfgtp","Check PFCP Session state","Review UPF startup logs","Verify N3 interface configuration"],severity:"critical",layer:"GTP"},ENCAP_FAILED:{code:"10",name:"Encapsulation Failed",description:"Failed to encapsulate packet in GTP-U tunnel (downlink direction).",impact:"Downlink packet to UE dropped. UE will not receive data.",possibleCauses:["Missing outer header creation info","Invalid gNB F-TEID","Memory allocation failure","gtp5g module internal error","Socket buffer allocation failed"],suggestedActions:["Check gtp5g module status: lsmod | grep gtp5g","Review dmesg for gtp5g errors","Verify FAR Outer Header Creation parameters","Check system memory availability","Verify gNB endpoint IP reachability"],severity:"critical",layer:"GTP"},DECAP_FAILED:{code:"11",name:"Decapsulation Failed",description:"Failed to decapsulate GTP-U packet (uplink direction). Cannot extract inner IP packet.",impact:"Uplink data from UE dropped. UE uploads will fail.",possibleCauses:["Corrupted GTP header","Invalid extension headers","Unsupported GTP version","gtp5g module bug","Packet truncation"],suggestedActions:["Capture and analyze GTP packets","Check gtp5g module logs","Verify GTP-U version compatibility","Update gtp5g module if needed","Check for packet fragmentation issues"],severity:"critical",layer:"GTP"},ROUTING_DROP:{code:"12",name:"Routing Drop",description:"Packet dropped due to routing decision. No route to destination or route unreachable.",impact:"Packet cannot reach destination. Connectivity failure.",possibleCauses:["No route to destination network","Next hop unreachable","Reverse path filtering (rp_filter)","Policy routing rule blocked","VRF/namespace routing issue"],suggestedActions:["Check routing table: ip route show","Verify next hop reachability","Check rp_filter: sysctl net.ipv4.conf.all.rp_filter","Review policy routing: ip rule show","Check network namespace configuration"],severity:"warning",layer:"Routing"},POLICY_DROP:{code:"13",name:"Policy Drop",description:"Packet dropped by access control policy (ACL/firewall rule).",impact:"Traffic blocked by policy. May be intentional security measure.",possibleCauses:["iptables/nftables rule blocked packet","UPF access control list","Security policy enforcement","Application filter rule","URL/content filtering"],suggestedActions:["Review firewall rules: iptables -L -n -v","Check UPF policy configuration","Verify application detection rules","Review security policies","Check if traffic should be allowed"],severity:"info",layer:"Routing"},MEMORY_ERROR:{code:"14",name:"Memory Error",description:"Memory allocation failure. System is under memory pressure.",impact:"Packets dropped due to OOM. System stability at risk.",possibleCauses:["System out of memory","Memory fragmentation","Memory leak in kernel module","Too many sessions consuming memory","sk_buff allocation failure"],suggestedActions:["Check system memory: free -h","Monitor OOM killer: dmesg | grep -i oom","Review session count and memory usage","Consider adding more RAM","Check for memory leaks: slabtop"],severity:"critical",layer:"Kernel"}},se="/api/v1";async function Ce(){const t=await fetch(`${se}/metrics/traffic`);if(!t.ok)throw new Error("Failed to fetch traffic metrics");return t.json()}async function De(){const t=await fetch(`${se}/metrics/drops`);if(!t.ok)throw new Error("Failed to fetch drop metrics");return t.json()}async function ue(){const t=await fetch(`${se}/sessions`);if(!t.ok)throw new Error("Failed to fetch sessions");return t.json()}function Te(t,s,a){const c=window.location.protocol==="https:"?"wss:":"ws:",i=new WebSocket(`${c}//${window.location.host}/ws/metrics`);return i.onmessage=m=>{try{const u=JSON.parse(m.data);t(u)}catch(u){console.error("Failed to parse WebSocket message:",u)}},i.onerror=s,i.onclose=a,i}function Me(t){const s=ee[t];if(!s)return"bg-slate-500/20 text-slate-400";switch(s.severity){case"critical":return"bg-red-500/20 text-red-400 border border-red-500/30";case"warning":return"bg-orange-500/20 text-orange-400 border border-orange-500/30";case"info":return"bg-blue-500/20 text-blue-400 border border-blue-500/30";default:return"bg-slate-500/20 text-slate-400"}}function ce(t){switch(t){case"critical":return"üî¥";case"warning":return"üü°";case"info":return"üîµ";default:return"‚ö™"}}function oe(t){switch(t){case"GTP":return"bg-purple-500/20 text-purple-400";case"PFCP":return"bg-cyan-500/20 text-cyan-400";case"Kernel":return"bg-slate-500/20 text-slate-400";case"QoS":return"bg-green-500/20 text-green-400";case"Routing":return"bg-amber-500/20 text-amber-400";default:return"bg-slate-500/20 text-slate-400"}}function Fe(t){return t>=1024?`${(t/1024).toFixed(1)} KB`:`${t} B`}function Le(t){return t==="uplink"?{icon:"‚Üë",label:"Uplink",path:"UE ‚Üí gNB ‚Üí UPF ‚Üí DN",color:"text-green-400"}:{icon:"‚Üì",label:"Downlink",path:"DN ‚Üí UPF ‚Üí gNB ‚Üí UE",color:"text-blue-400"}}function Re(t,s){var a;if(!(!s||s.length===0)){if(t.teid&&t.teid!=="0x0"&&t.teid!=="0x00000000"){const c=t.teid.toLowerCase();for(const i of s)if((a=i.teids)!=null&&a.some(m=>m.toLowerCase()===c))return i}if(t.src_ip||t.dst_ip){for(const c of s)if(c.ue_ip===t.src_ip||c.ue_ip===t.dst_ip)return c}}}function Ee(t,s){const a=new Date(t.timestamp).toISOString(),c=t.teid||"N/A",i=t.src_ip||"0.0.0.0",m=t.dst_ip||"0.0.0.0",u=t.src_port||0,b=t.dst_port||0,C=(s==null?void 0:s.code)||"?";return`[${a}] [DROP] reason=${t.reason}(${C}) direction=${t.direction} teid=${c} src=${i}:${u} dst=${m}:${b} len=${t.pkt_len} layer=${(s==null?void 0:s.layer)||"unknown"}`}function Ue({drops:t,sessions:s=[],theme:a="dark"}){var f,n;const[c,i]=j.useState(null),[m,u]=j.useState(!1),[b,C]=j.useState(new Set),[d,k]=j.useState("timeline"),p=t.total>0,N=Math.max(...Object.values(t.by_reason||{}),1),g=m?t.recent_drops||[]:(t.recent_drops||[]).slice(0,5),_=j.useMemo(()=>{const r={},v=t.total||1;return Object.entries(t.by_reason||{}).forEach(([o,x])=>{r[o]={count:x,percentage:x/v*100,info:ee[o]}}),r},[t.by_reason,t.total]),S=a==="dark"?"text-white":"text-gray-900",w=a==="dark"?"text-slate-400":"text-gray-500",l=a==="dark"?"text-slate-500":"text-gray-400",y=a==="dark"?"bg-slate-800/30":"bg-gray-50",$=a==="dark"?"hover:bg-slate-700/50":"hover:bg-gray-100",F=a==="dark"?"bg-slate-700":"bg-gray-200",D=a==="dark"?"border-slate-700":"border-gray-200",M=a==="dark"?"hover:border-slate-600":"hover:border-gray-300",P=a==="dark"?"bg-slate-900":"bg-gray-100",h=r=>{const v=new Set(b);v.has(r)?v.delete(r):v.add(r),C(v)};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`p-4 rounded-lg ${p?"bg-red-500/10 border border-red-500/20":"bg-green-500/10 border border-green-500/20"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`text-2xl ${p?"pulse-alert":""}`,children:p?"‚ö†Ô∏è":"‚úÖ"}),e.jsxs("div",{children:[e.jsx("div",{className:`font-semibold ${p?"text-red-400":"text-green-400"}`,children:p?`${t.total.toLocaleString()} Drops Detected`:"No Drops Detected"}),e.jsxs("div",{className:w,children:["Drop Rate: ",t.rate_percent.toFixed(4),"% | ",Object.keys(t.by_reason||{}).length," unique reasons"]})]})]}),p&&e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-red-400",children:[t.rate_percent.toFixed(2),"%"]}),e.jsx("div",{className:"text-xs text-slate-500",children:"packet loss rate"})]})]})}),p&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>k("timeline"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${d==="timeline"?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/30":`${y} ${w} ${M} border ${D}`}`,children:"üìã Timeline View"}),e.jsx("button",{onClick:()=>k("analysis"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${d==="analysis"?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/30":`${y} ${w} ${M} border ${D}`}`,children:"üîç Root Cause Analysis"})]}),d==="analysis"&&Object.keys(t.by_reason||{}).length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:`text-sm font-medium ${a==="dark"?"text-slate-300":"text-gray-700"}`,children:"üîç Drop Reasons Analysis"}),Object.entries(_).sort(([,r],[,v])=>v.count-r.count).map(([r,{count:v,percentage:o,info:x}])=>{var T;return e.jsxs("div",{className:`rounded-lg border ${D} overflow-hidden`,children:[e.jsxs("div",{className:`p-3 cursor-pointer ${y} ${$} transition-colors`,onClick:()=>h(r),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-lg",children:x?ce(x.severity):"‚ö™"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`font-medium ${S}`,children:(x==null?void 0:x.name)||r}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${oe((x==null?void 0:x.layer)||"")}`,children:(x==null?void 0:x.layer)||"Unknown"})]}),e.jsxs("div",{className:`text-xs ${l} mt-0.5`,children:[(T=x==null?void 0:x.description)==null?void 0:T.substring(0,80),"..."]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-lg font-bold ${(x==null?void 0:x.severity)==="critical"?"text-red-400":(x==null?void 0:x.severity)==="warning"?"text-orange-400":"text-blue-400"}`,children:v.toLocaleString()}),e.jsxs("div",{className:"text-xs text-slate-500",children:[o.toFixed(1),"%"]})]}),e.jsx("span",{className:`transition-transform ${b.has(r)?"rotate-180":""}`,children:"‚ñº"})]})]}),e.jsx("div",{className:`mt-2 h-1.5 ${F} rounded-full overflow-hidden`,children:e.jsx("div",{className:`h-full transition-all duration-500 ${(x==null?void 0:x.severity)==="critical"?"bg-gradient-to-r from-red-600 to-red-400":(x==null?void 0:x.severity)==="warning"?"bg-gradient-to-r from-orange-600 to-orange-400":"bg-gradient-to-r from-blue-600 to-blue-400"}`,style:{width:`${v/N*100}%`}})})]}),b.has(r)&&x&&e.jsxs("div",{className:`p-4 border-t ${D} space-y-4`,children:[e.jsxs("div",{children:[e.jsx("h4",{className:`text-xs font-semibold uppercase tracking-wider ${l} mb-2`,children:"Description"}),e.jsx("p",{className:`text-sm ${w}`,children:x.description})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-xs font-semibold uppercase tracking-wider ${l} mb-2`,children:"üìä Impact"}),e.jsx("p",{className:`text-sm ${w}`,children:x.impact})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-xs font-semibold uppercase tracking-wider ${l} mb-2`,children:"üîé Possible Causes"}),e.jsx("ul",{className:"space-y-1",children:x.possibleCauses.map((L,R)=>e.jsxs("li",{className:`text-sm ${w} flex items-start gap-2`,children:[e.jsx("span",{className:"text-yellow-500 mt-0.5",children:"‚Ä¢"}),L]},R))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-xs font-semibold uppercase tracking-wider ${l} mb-2`,children:"üõ†Ô∏è Suggested Actions"}),e.jsx("ul",{className:"space-y-2",children:x.suggestedActions.map((L,R)=>e.jsxs("li",{className:"text-sm flex items-start gap-2",children:[e.jsxs("span",{className:"text-green-500 font-bold",children:[R+1,"."]}),e.jsx("span",{className:w,children:L.includes(":")?e.jsxs(e.Fragment,{children:[L.split(":")[0],":",e.jsx("code",{className:`ml-1 px-1.5 py-0.5 rounded ${P} text-cyan-400 font-mono text-xs`,children:L.split(":").slice(1).join(":")})]}):L})]},R))})]}),e.jsxs("div",{className:`p-3 rounded-lg ${P} border ${D}`,children:[e.jsx("h4",{className:`text-xs font-semibold uppercase tracking-wider ${l} mb-2`,children:"üìù Technical Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:l,children:"Reason Code:"}),e.jsx("span",{className:"ml-2 font-mono text-cyan-400",children:x.code})]}),e.jsxs("div",{children:[e.jsx("span",{className:l,children:"Layer:"}),e.jsx("span",{className:"ml-2 font-mono text-cyan-400",children:x.layer})]}),e.jsxs("div",{children:[e.jsx("span",{className:l,children:"Severity:"}),e.jsx("span",{className:`ml-2 font-mono ${x.severity==="critical"?"text-red-400":x.severity==="warning"?"text-orange-400":"text-blue-400"}`,children:x.severity.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("span",{className:l,children:"Occurrences:"}),e.jsx("span",{className:"ml-2 font-mono text-cyan-400",children:v.toLocaleString()})]})]})]})]})]},r)})]}),d==="timeline"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:`text-sm font-medium ${a==="dark"?"text-slate-300":"text-gray-700"}`,children:"üìã Recent Drop Events Timeline"}),(((f=t.recent_drops)==null?void 0:f.length)||0)>5&&e.jsx("button",{onClick:()=>u(!m),className:"text-xs text-cyan-400 hover:text-cyan-300",children:m?"Show Less":`Show All (${(n=t.recent_drops)==null?void 0:n.length})`})]}),!t.recent_drops||t.recent_drops.length===0?e.jsxs("div",{className:`text-center py-6 ${l} text-sm ${y} rounded-lg`,children:[e.jsx("div",{className:"text-3xl mb-2",children:"üéâ"}),e.jsx("p",{children:"No recent drop events"}),e.jsx("p",{className:"text-xs mt-1",children:"Network is running smoothly"})]}):e.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:g.map((r,v)=>{const o=ee[r.reason],x=Le(r.direction),T=Re(r,s),L=Ee(r,o);return e.jsxs("div",{className:`rounded-lg border transition-all ${c===v?`${a==="dark"?"bg-slate-700/50":"bg-gray-100"} border-cyan-500`:`${y} ${D} ${M}`}`,children:[e.jsx("div",{className:"p-3 cursor-pointer",onClick:()=>i(c===v?null:v),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:`text-lg ${x.color}`,children:x.icon}),e.jsx("span",{className:"text-xs text-slate-500",children:x.label})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:`text-xs px-2 py-0.5 rounded ${Me(r.reason)}`,children:[o?ce(o.severity):"‚ö™"," ",r.reason]}),o&&e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${oe(o.layer)}`,children:o.layer})]}),e.jsxs("div",{className:`text-xs ${l} mt-1`,children:[new Date(r.timestamp).toLocaleString()," | TEID: ",e.jsx("span",{className:"font-mono text-cyan-400",children:r.teid})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-sm font-mono ${a==="dark"?"text-slate-300":"text-gray-700"}`,children:Fe(r.pkt_len)}),T&&e.jsx("div",{className:"text-xs text-green-400",children:"üì± Session Found"})]}),e.jsx("span",{className:`transition-transform text-slate-500 ${c===v?"rotate-180":""}`,children:"‚ñº"})]})]})}),c===v&&e.jsxs("div",{className:`border-t ${D}`,children:[e.jsxs("div",{className:`p-4 ${P}`,children:[e.jsxs("h4",{className:`text-xs font-semibold uppercase tracking-wider ${l} mb-3`,children:["üîó Connection Path (Drop Point: ",(o==null?void 0:o.layer)||"Unknown",")"]}),e.jsx("div",{className:"flex items-center justify-center gap-2 text-sm",children:r.direction==="uplink"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`px-3 py-2 rounded ${y} border ${D}`,children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Source (UE)"}),e.jsx("div",{className:"font-mono text-green-400",children:r.src_ip||"Unknown"}),r.src_port&&e.jsxs("div",{className:"text-xs text-slate-500",children:[":",r.src_port]})]}),e.jsx("span",{className:"text-green-400",children:"‚Üí"}),e.jsxs("div",{className:`px-3 py-2 rounded border-2 ${(o==null?void 0:o.layer)==="GTP"||(o==null?void 0:o.layer)==="PFCP"?"border-red-500 bg-red-500/10":`${y} ${D}`}`,children:[e.jsx("div",{className:"text-xs text-slate-500",children:"UPF"}),e.jsx("div",{className:"font-mono text-purple-400",children:(T==null?void 0:T.upf_ip)||"N/A"}),(o==null?void 0:o.layer)==="GTP"||(o==null?void 0:o.layer)==="PFCP"?e.jsx("div",{className:"text-xs text-red-400",children:"‚ùå DROP HERE"}):null]}),e.jsx("span",{className:"text-blue-400",children:"‚Üí"}),e.jsxs("div",{className:`px-3 py-2 rounded border ${(o==null?void 0:o.layer)==="Routing"?"border-red-500 bg-red-500/10":`${y} ${D}`}`,children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Destination (DN)"}),e.jsx("div",{className:"font-mono text-blue-400",children:r.dst_ip||"Unknown"}),r.dst_port&&e.jsxs("div",{className:"text-xs text-slate-500",children:[":",r.dst_port]}),(o==null?void 0:o.layer)==="Routing"?e.jsx("div",{className:"text-xs text-red-400",children:"‚ùå DROP HERE"}):null]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`px-3 py-2 rounded ${y} border ${D}`,children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Source (DN)"}),e.jsx("div",{className:"font-mono text-blue-400",children:r.src_ip||"Unknown"}),r.src_port&&e.jsxs("div",{className:"text-xs text-slate-500",children:[":",r.src_port]})]}),e.jsx("span",{className:"text-blue-400",children:"‚Üí"}),e.jsxs("div",{className:`px-3 py-2 rounded border-2 ${(o==null?void 0:o.layer)==="GTP"||(o==null?void 0:o.layer)==="PFCP"?"border-red-500 bg-red-500/10":`${y} ${D}`}`,children:[e.jsx("div",{className:"text-xs text-slate-500",children:"UPF"}),e.jsx("div",{className:"font-mono text-purple-400",children:(T==null?void 0:T.upf_ip)||"N/A"}),(o==null?void 0:o.layer)==="GTP"||(o==null?void 0:o.layer)==="PFCP"?e.jsx("div",{className:"text-xs text-red-400",children:"‚ùå DROP HERE"}):null]}),e.jsx("span",{className:"text-green-400",children:"‚Üí"}),e.jsxs("div",{className:`px-3 py-2 rounded ${y} border ${D}`,children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Destination (UE)"}),e.jsx("div",{className:"font-mono text-green-400",children:r.dst_ip||"Unknown"}),r.dst_port&&e.jsxs("div",{className:"text-xs text-slate-500",children:[":",r.dst_port]})]})]})})]}),o&&e.jsxs("div",{className:`p-4 border-t ${D}`,children:[e.jsx("h4",{className:`text-xs font-semibold uppercase tracking-wider ${l} mb-2`,children:"‚ùì Why This Drop Occurred"}),e.jsx("p",{className:`text-sm ${w}`,children:o.description}),e.jsxs("div",{className:`mt-2 p-2 rounded ${o.severity==="critical"?"bg-red-500/10":o.severity==="warning"?"bg-orange-500/10":"bg-blue-500/10"}`,children:[e.jsx("span",{className:"text-xs font-medium",children:"Impact: "}),e.jsx("span",{className:`text-xs ${w}`,children:o.impact})]})]}),T&&e.jsxs("div",{className:`p-4 border-t ${D}`,children:[e.jsx("h4",{className:`text-xs font-semibold uppercase tracking-wider ${l} mb-2`,children:"üì± Correlated Session"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:l,children:"SEID:"}),e.jsx("div",{className:"font-mono text-cyan-400",children:T.seid})]}),e.jsxs("div",{children:[e.jsx("span",{className:l,children:"UE IP:"}),e.jsx("div",{className:"font-mono text-green-400",children:T.ue_ip})]}),e.jsxs("div",{children:[e.jsx("span",{className:l,children:"SUPI:"}),e.jsx("div",{className:"font-mono text-purple-400",children:T.supi||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:l,children:"DNN:"}),e.jsx("div",{className:"font-mono text-amber-400",children:T.dnn||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:l,children:"gNB IP:"}),e.jsx("div",{className:"font-mono text-blue-400",children:T.gnb_ip||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:l,children:"UPF IP:"}),e.jsx("div",{className:"font-mono text-purple-400",children:T.upf_ip||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:l,children:"QFI:"}),e.jsx("div",{className:"font-mono text-cyan-400",children:T.qfi??"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:l,children:"Status:"}),e.jsx("div",{className:`font-medium ${T.status==="Active"?"text-green-400":"text-yellow-400"}`,children:T.status})]})]})]}),o&&e.jsxs("div",{className:`p-4 border-t ${D}`,children:[e.jsx("h4",{className:`text-xs font-semibold uppercase tracking-wider ${l} mb-2`,children:"üõ†Ô∏è Quick Actions"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.suggestedActions.slice(0,3).map((R,B)=>{const E=R.includes(":")?R.split(":").slice(1).join(":").trim():null;return e.jsx("div",{className:`px-3 py-2 rounded text-xs ${y} border ${D}`,children:E?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:w,children:R.split(":")[0]}),e.jsx("code",{className:"font-mono text-cyan-400",children:E})]}):e.jsx("span",{className:w,children:R})},B)})})]}),e.jsxs("div",{className:`p-4 border-t ${D}`,children:[e.jsx("h4",{className:`text-xs font-semibold uppercase tracking-wider ${l} mb-2`,children:"üìú Raw Agent Log"}),e.jsx("pre",{className:`p-3 rounded text-xs font-mono ${P} overflow-x-auto whitespace-pre-wrap break-all text-slate-300`,children:L})]}),e.jsxs("div",{className:`p-4 border-t ${D}`,children:[e.jsx("h4",{className:`text-xs font-semibold uppercase tracking-wider ${l} mb-2`,children:"üì¶ Packet Details"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:l,children:"TEID:"}),e.jsx("div",{className:"font-mono text-cyan-400",children:r.teid})]}),e.jsxs("div",{children:[e.jsx("span",{className:l,children:"Source IP:"}),e.jsx("div",{className:"font-mono text-green-400",children:r.src_ip})]}),e.jsxs("div",{children:[e.jsx("span",{className:l,children:"Dest IP:"}),e.jsx("div",{className:"font-mono text-blue-400",children:r.dst_ip})]}),e.jsxs("div",{children:[e.jsx("span",{className:l,children:"Packet Size:"}),e.jsxs("div",{className:"font-mono text-purple-400",children:[r.pkt_len," bytes"]})]}),r.src_port&&e.jsxs("div",{children:[e.jsx("span",{className:l,children:"Source Port:"}),e.jsx("div",{className:"font-mono text-amber-400",children:r.src_port})]}),r.dst_port&&e.jsxs("div",{children:[e.jsx("span",{className:l,children:"Dest Port:"}),e.jsx("div",{className:"font-mono text-amber-400",children:r.dst_port})]}),e.jsxs("div",{children:[e.jsx("span",{className:l,children:"Direction:"}),e.jsx("div",{className:x.color,children:x.path})]}),e.jsxs("div",{children:[e.jsx("span",{className:l,children:"Timestamp:"}),e.jsx("div",{className:"font-mono text-slate-400",children:new Date(r.timestamp).toISOString()})]})]})]})]})]},v)})})]})]})}function H(t){return!t||t===0?"0 B":t<1024?`${t} B`:t<1024*1024?`${(t/1024).toFixed(2)} KB`:t<1024*1024*1024?`${(t/1024/1024).toFixed(2)} MB`:`${(t/1024/1024/1024).toFixed(2)} GB`}function te(t){if(!t)return"N/A";try{const s=new Date(t);return isNaN(s.getTime())?t:s.toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}catch{return t}}function Ae({session:t,onClose:s,theme:a}){var k,p,N,g,_;const c=((k=t.teids)==null?void 0:k[0])||"N/A",i=a==="dark"?"bg-gray-800":"bg-white",m=a==="dark"?"bg-gray-700/50":"bg-gray-100",u=a==="dark"?"text-white":"text-gray-900",b=a==="dark"?"text-gray-400":"text-gray-600",C=a==="dark"?"border-gray-600":"border-gray-300",d=a==="dark"?"bg-gray-700/50":"bg-gray-100";return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${i} rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto`,children:[e.jsxs("div",{className:"bg-gradient-to-r from-cyan-600 to-blue-600 px-6 py-4 rounded-t-xl flex justify-between items-center sticky top-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"PDU Session Ë©≥Á¥∞Ë≥áË®ä"}),e.jsxs("p",{className:"text-cyan-100 text-sm",children:["SEID: ",t.seid]})]}),e.jsx("button",{onClick:s,className:"text-white hover:bg-white/20 rounded-full p-2 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-cyan-400 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"})}),"Áî®Êà∂Ë≠òÂà•"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{label:"SUPI (Áî®Êà∂Ê∞∏‰πÖË≠òÂà•)",value:t.supi||"Êú™Êèê‰æõ",icon:"üÜî",theme:a}),e.jsx(U,{label:"UE IP Âú∞ÂùÄ",value:t.ue_ip||"N/A",icon:"üåê",theme:a}),e.jsx(U,{label:"SEID (Session Endpoint ID)",value:t.seid,icon:"üîó",theme:a}),e.jsx(U,{label:"TEID (Tunnel Endpoint ID)",value:c,icon:"üöá",theme:a})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-green-400 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"})}),"Á∂≤Ë∑ØËàá QoS Ë≥áË®ä"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{label:"DNN (Data Network Name)",value:t.dnn||"Êú™Ëß£Êûê",icon:"üì°",theme:a}),e.jsx(U,{label:"QFI (QoS Flow ID)",value:((p=t.qfi)==null?void 0:p.toString())||"N/A",icon:"‚ö°",theme:a})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-purple-400 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"GTP-U ÈößÈÅìË≥áË®ä"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:`${m} rounded-lg p-4 border border-purple-500/30`,children:[e.jsx("h4",{className:"text-purple-300 font-medium mb-2",children:"üì§ UPF Á´ØÈªû"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:b,children:"IP Âú∞ÂùÄ:"}),e.jsx("span",{className:`${u} font-mono`,children:t.upf_ip||"Êú™Áü•"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:b,children:"TEIDs:"}),e.jsx("span",{className:`${u} font-mono text-sm`,children:((N=t.teids)==null?void 0:N.join(", "))||"N/A"})]})]})]}),e.jsxs("div",{className:`${m} rounded-lg p-4 border border-blue-500/30`,children:[e.jsx("h4",{className:"text-blue-300 font-medium mb-2",children:"üì• gNB Á´ØÈªû"}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:b,children:"IP Âú∞ÂùÄ:"}),e.jsx("span",{className:`${u} font-mono`,children:t.gnb_ip||"Êú™Áü•"})]})})]})]})]}),(t.mbr_ul_kbps||t.mbr_dl_kbps)&&e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-orange-400 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"È†ªÂØ¨ÈôêÂà∂ (MBR)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.mbr_ul_kbps&&e.jsx(U,{label:"MBR ‰∏äË°å",value:`${(t.mbr_ul_kbps/1e3).toFixed(0)} Mbps`,icon:"‚¨ÜÔ∏è",theme:a}),t.mbr_dl_kbps&&e.jsx(U,{label:"MBR ‰∏ãË°å",value:`${(t.mbr_dl_kbps/1e3).toFixed(0)} Mbps`,icon:"‚¨áÔ∏è",theme:a})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-yellow-400 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"ÊµÅÈáèÁµ±Ë®à"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(z,{label:"‰∏äË°åÂ∞ÅÂåÖÊï∏",value:(t.packets_ul||0).toLocaleString(),icon:"üì§",color:"blue",theme:a}),e.jsx(z,{label:"‰∏ãË°åÂ∞ÅÂåÖÊï∏",value:(t.packets_dl||0).toLocaleString(),icon:"üì•",color:"green",theme:a}),e.jsx(z,{label:"‰∏äË°åÊµÅÈáè",value:H(t.bytes_ul||0),icon:"‚¨ÜÔ∏è",color:"blue",theme:a}),e.jsx(z,{label:"‰∏ãË°åÊµÅÈáè",value:H(t.bytes_dl||0),icon:"‚¨áÔ∏è",color:"green",theme:a})]}),e.jsxs("div",{className:`mt-4 ${m} rounded-lg p-4`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:b,children:"Á∏ΩÊµÅÈáè"}),e.jsx("span",{className:`text-xl font-bold ${u}`,children:H((t.bytes_ul||0)+(t.bytes_dl||0))})]}),(t.bytes_ul||0)+(t.bytes_dl||0)>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`mt-2 w-full ${a==="dark"?"bg-gray-600":"bg-gray-300"} rounded-full h-2`,children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-2 rounded-full",style:{width:`${(t.bytes_ul||0)/((t.bytes_ul||0)+(t.bytes_dl||0))*100}%`}})}),e.jsxs("div",{className:`flex justify-between text-xs ${b} mt-1`,children:[e.jsxs("span",{children:["‰∏äË°å: ",((t.bytes_ul||0)/((t.bytes_ul||0)+(t.bytes_dl||0))*100).toFixed(1),"%"]}),e.jsxs("span",{children:["‰∏ãË°å: ",((t.bytes_dl||0)/((t.bytes_ul||0)+(t.bytes_dl||0))*100).toFixed(1),"%"]})]})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-400 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"ÊôÇÈñìËàáÁãÄÊÖã"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(U,{label:"Âª∫Á´ãÊôÇÈñì",value:te(t.created_at),icon:"üïê",theme:a}),e.jsx(U,{label:"Session ÊåÅÁ∫åÊôÇÈñì",value:t.duration||"N/A",icon:"‚è±Ô∏è",theme:a}),e.jsx(U,{label:"ÊúÄÂæåÊ¥ªÂãïÊôÇÈñì",value:te(t.last_active),icon:"üîÑ",theme:a})]}),e.jsx("div",{className:`mt-4 ${m} rounded-lg p-4 border border-green-500/30`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${t.status==="Active"?"bg-green-500 animate-pulse":"bg-gray-500"}`}),e.jsx("span",{className:`text-lg font-medium ${u}`,children:t.status==="Active"?"üü¢ Ê¥ªË∫ç‰∏≠":t.status||"Êú™Áü•"})]})})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-pink-400 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"SEID ‚Üî TEID Êò†Â∞ÑÈóú‰øÇ"]}),e.jsxs("div",{className:`${a==="dark"?"bg-gray-900/50":"bg-gray-50"} rounded-lg p-4 border border-pink-500/30`,children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-4",children:[e.jsxs("div",{className:"bg-cyan-600/30 rounded-lg px-6 py-4 text-center border border-cyan-500",children:[e.jsx("div",{className:"text-cyan-300 text-sm mb-1",children:"PFCP Session"}),e.jsxs("div",{className:`${u} font-bold text-xl`,children:["SEID: ",t.seid]})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("svg",{className:"w-8 h-8 text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})}),e.jsx("span",{className:`text-xs ${b}`,children:"Â∞çÊáâ"})]}),e.jsxs("div",{className:"bg-purple-600/30 rounded-lg px-6 py-4 text-center border border-purple-500",children:[e.jsx("div",{className:"text-purple-300 text-sm mb-1",children:"GTP-U Tunnel"}),e.jsxs("div",{className:`${u} font-bold text-xl`,children:["TEIDs: ",((g=t.teids)==null?void 0:g.length)||0," ÂÄã"]}),e.jsxs("div",{className:"text-purple-200 text-sm mt-1",children:[(_=t.teids)==null?void 0:_.slice(0,2).join(", "),t.teids&&t.teids.length>2?"...":""]})]})]}),e.jsx("div",{className:`mt-4 text-center text-sm ${b}`,children:"Ê≠§ PDU Session ÈÄèÈÅé PFCP ÂçîÂÆöÂª∫Á´ãÔºå‰∏¶Âú®Áî®Êà∂Âπ≥Èù¢‰ΩøÁî® GTP-U ÈößÈÅìÂÇ≥Ëº∏Ë≥áÊñô"})]})]})]}),e.jsx("div",{className:`${d} px-6 py-4 rounded-b-xl border-t ${C}`,children:e.jsx("button",{onClick:s,className:"w-full bg-cyan-600 hover:bg-cyan-500 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"ÈóúÈñâ"})})]})})}function U({label:t,value:s,icon:a,theme:c="dark"}){const i=c==="dark"?"bg-gray-700/50":"bg-gray-100",m=c==="dark"?"border-gray-600":"border-gray-300",u=c==="dark"?"text-gray-400":"text-gray-600",b=c==="dark"?"text-white":"text-gray-900";return e.jsxs("div",{className:`${i} rounded-lg p-3 border ${m}`,children:[e.jsxs("div",{className:`${u} text-xs mb-1 flex items-center gap-1`,children:[a&&e.jsx("span",{children:a}),t]}),e.jsx("div",{className:`${b} font-medium break-all`,children:s})]})}function z({label:t,value:s,icon:a,color:c="blue",theme:i="dark"}){const m={blue:"from-blue-500/20 to-blue-600/20 border-blue-500/30",green:"from-green-500/20 to-green-600/20 border-green-500/30",yellow:"from-yellow-500/20 to-yellow-600/20 border-yellow-500/30",red:"from-red-500/20 to-red-600/20 border-red-500/30"},u=i==="dark"?"text-gray-400":"text-gray-600",b=i==="dark"?"text-white":"text-gray-900";return e.jsxs("div",{className:`bg-gradient-to-br ${m[c]} rounded-lg p-3 border`,children:[e.jsxs("div",{className:`${u} text-xs mb-1 flex items-center gap-1`,children:[a&&e.jsx("span",{children:a}),t]}),e.jsx("div",{className:`${b} font-bold text-lg`,children:s})]})}function Be({theme:t="dark"}){const[s,a]=j.useState([]),[c,i]=j.useState(null),[m,u]=j.useState(!1),[b,C]=j.useState(null),[d,k]=j.useState("created_at"),[p,N]=j.useState("desc"),[g,_]=j.useState("");j.useEffect(()=>{const l=async()=>{u(!0);try{const $=await ue();a($.sessions||[]),C(null)}catch($){C("ÁÑ°Ê≥ïËºâÂÖ• PDU Sessions"),console.error($)}finally{u(!1)}};l();const y=setInterval(l,5e3);return()=>clearInterval(y)},[]);const S=j.useMemo(()=>{let l=[...s];if(g){const y=g.toLowerCase();l=l.filter($=>{var F,D,M,P,h;return((F=$.seid)==null?void 0:F.toLowerCase().includes(y))||((D=$.ue_ip)==null?void 0:D.toLowerCase().includes(y))||((M=$.supi)==null?void 0:M.toLowerCase().includes(y))||((P=$.dnn)==null?void 0:P.toLowerCase().includes(y))||((h=$.teids)==null?void 0:h.some(f=>f.toLowerCase().includes(y)))})}return l.sort((y,$)=>{let F=0;switch(d){case"seid":F=(y.seid||"").localeCompare($.seid||"");break;case"ue_ip":F=(y.ue_ip||"").localeCompare($.ue_ip||"");break;case"packets":const D=(y.packets_ul||0)+(y.packets_dl||0),M=($.packets_ul||0)+($.packets_dl||0);F=D-M;break;case"created_at":F=(y.created_at||"").localeCompare($.created_at||"");break}return p==="asc"?F:-F}),l},[s,g,d,p]),w=l=>{d===l?N(y=>y==="asc"?"desc":"asc"):(k(l),N("desc"))};return m&&s.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-500"})}):b&&s.length===0?e.jsx("div",{className:"bg-red-500/20 text-red-400 p-4 rounded-lg text-center",children:b}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx("input",{type:"text",placeholder:"ÊêúÂ∞ã SEID, UE IP, SUPI, DNN, TEID...",value:g,onChange:l=>_(l.target.value),className:`w-full rounded-lg pl-10 pr-4 py-2 focus:outline-none focus:ring-2 focus:ring-cyan-500 ${t==="dark"?"bg-gray-700 text-white placeholder-gray-400":"bg-gray-100 text-gray-900 placeholder-gray-500 border border-gray-300"}`}),e.jsx("svg",{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 ${t==="dark"?"text-gray-400":"text-gray-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("span",{className:t==="dark"?"text-gray-400":"text-gray-600",children:["Á∏ΩÂÖ± ",e.jsx("span",{className:"text-cyan-400 font-bold",children:s.length})," ÂÄã Sessions"]}),g&&e.jsxs("span",{className:t==="dark"?"text-gray-400":"text-gray-600",children:["Á¨¶Âêà ",e.jsx("span",{className:"text-green-400 font-bold",children:S.length})," Á≠Ü"]})]})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:[{field:"created_at",label:"Âª∫Á´ãÊôÇÈñì"},{field:"seid",label:"SEID"},{field:"ue_ip",label:"UE IP"},{field:"packets",label:"Â∞ÅÂåÖÊï∏"}].map(({field:l,label:y})=>e.jsxs("button",{onClick:()=>w(l),className:`px-3 py-1 rounded-lg text-sm transition-colors ${d===l?"bg-cyan-600 text-white":t==="dark"?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[y,d===l&&e.jsx("span",{className:"ml-1",children:p==="asc"?"‚Üë":"‚Üì"})]},l))}),S.length===0?e.jsxs("div",{className:`rounded-lg p-8 text-center ${t==="dark"?"bg-gray-800/50":"bg-gray-100"}`,children:[e.jsx("div",{className:`text-lg mb-2 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:g?"üîç Ê≤íÊúâÁ¨¶ÂêàÁöÑ Sessions":"üì≠ ÁõÆÂâçÊ≤íÊúâÊ¥ªË∫çÁöÑ PDU Sessions"}),e.jsx("p",{className:"text-sm text-gray-500",children:g?"Ë´ãÂòóË©¶ÂÖ∂‰ªñÊêúÂ∞ãÊ¢ù‰ª∂":"Áï∂ UE Âª∫Á´ã PDU Session ÊôÇÊúÉËá™ÂãïÈ°ØÁ§∫Âú®ÈÄôË£°"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:S.map((l,y)=>{var $;return e.jsxs("div",{onClick:()=>i(l),className:`rounded-xl p-4 cursor-pointer transition-all hover:scale-[1.02] hover:shadow-lg hover:shadow-cyan-500/10 border hover:border-cyan-500/50 ${t==="dark"?"bg-gray-800/80 hover:bg-gray-700/80 border-gray-700":"bg-white hover:bg-gray-50 border-gray-200"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-cyan-400 font-bold text-lg",children:["SEID: ",l.seid]}),e.jsxs("div",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:["TEIDs: ",(($=l.teids)==null?void 0:$.length)||0," ÂÄã"]})]}),e.jsx("div",{className:`px-2 py-1 rounded-full text-xs ${l.status==="Active"?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"}`,children:l.status==="Active"?"Ê¥ªË∫ç":l.status||"Êú™Áü•"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:t==="dark"?"text-gray-400":"text-gray-600",children:"UE IP:"}),e.jsx("span",{className:`font-mono ${t==="dark"?"text-white":"text-gray-900"}`,children:l.ue_ip||"N/A"})]}),l.supi&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:t==="dark"?"text-gray-400":"text-gray-600",children:"SUPI:"}),e.jsx("span",{className:`font-mono text-xs ${t==="dark"?"text-white":"text-gray-900"}`,children:l.supi})]}),l.dnn&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:t==="dark"?"text-gray-400":"text-gray-600",children:"DNN:"}),e.jsx("span",{className:t==="dark"?"text-white":"text-gray-900",children:l.dnn})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:t==="dark"?"text-gray-400":"text-gray-600",children:"Â∞ÅÂåÖ:"}),e.jsxs("span",{className:t==="dark"?"text-white":"text-gray-900",children:["‚Üë",(l.packets_ul||0).toLocaleString()," / ‚Üì",(l.packets_dl||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:t==="dark"?"text-gray-400":"text-gray-600",children:"ÊµÅÈáè:"}),e.jsx("span",{className:t==="dark"?"text-white":"text-gray-900",children:H((l.bytes_ul||0)+(l.bytes_dl||0))})]})]}),e.jsxs("div",{className:`mt-3 pt-3 border-t flex justify-between items-center ${t==="dark"?"border-gray-700":"border-gray-200"}`,children:[e.jsx("span",{className:"text-xs text-gray-500",children:l.duration||te(l.created_at)}),e.jsx("svg",{className:"w-5 h-5 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},`${l.seid}-${y}`)})}),c&&e.jsx(Ae,{session:c,onClose:()=>i(null),theme:t})]})}const I=["#22c55e","#3b82f6","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#ec4899","#14b8a6","#f97316","#6366f1"];function A(t){return t>=1e9?`${(t/1e9).toFixed(2)} GB`:t>=1e6?`${(t/1e6).toFixed(2)} MB`:t>=1e3?`${(t/1e3).toFixed(2)} KB`:`${t} B`}function Ie({sessions:t,theme:s="dark"}){const[a,c]=j.useState("bar"),[i,m]=j.useState("total"),[u,b]=j.useState(new Map),C=s==="dark"?"#334155":"#e2e8f0",d=s==="dark"?"#64748b":"#94a3b8",k=s==="dark"?"#1e293b":"#ffffff",p=s==="dark"?"#334155":"#e2e8f0",N=s==="dark"?"#e2e8f0":"#1e293b",g=s==="dark"?"text-slate-400":"text-gray-500",_=s==="dark"?"bg-slate-700":"bg-gray-200",S=s==="dark"?"text-slate-400 hover:text-white":"text-gray-600 hover:text-gray-900",w=s==="dark"?"bg-slate-700/50":"bg-gray-100",l=s==="dark"?"text-white":"text-gray-900",y=s==="dark"?"border-slate-700":"border-gray-200",$=s==="dark"?"hover:bg-slate-700/30":"hover:bg-gray-50",F=s==="dark"?"bg-slate-700 border-slate-600":"bg-white border-gray-300",D=s==="dark"?"bg-slate-700":"bg-gray-200",M=j.useMemo(()=>t.map((n,r)=>({name:`UE ${r+1}`,seid:n.seid,ue_ip:n.ue_ip,uplink:n.bytes_ul||0,downlink:n.bytes_dl||0,total:(n.bytes_ul||0)+(n.bytes_dl||0),packetsUL:n.packets_ul||0,packetsDL:n.packets_dl||0})).sort((n,r)=>r[i]-n[i]),[t,i]);j.useEffect(()=>{if(t.length===0)return;const n=Date.now();b(r=>{const v=new Map(r);return t.forEach(o=>{const x=o.seid,T=(o.bytes_ul||0)+(o.bytes_dl||0),L=v.get(x)||[];L.push({bytes:T,time:n});const R=n-6e4,B=L.filter(E=>E.time>R);v.set(x,B)}),v})},[t]);const P=j.useMemo(()=>{const n=[],r=Date.now();for(let v=12;v>=0;v--){const o=r-v*5e3,x={time:new Date(o).toLocaleTimeString("en-US",{hour12:!1,minute:"2-digit",second:"2-digit"})};t.slice(0,5).forEach((T,L)=>{const B=(u.get(T.seid)||[]).reduce((E,ae)=>Math.abs(ae.time-o)<Math.abs(E.time-o)?ae:E,{bytes:0,time:0});x[`session${L}`]=B.bytes}),n.push(x)}return n},[t,u]),h=j.useMemo(()=>M.slice(0,8).map((n,r)=>({name:n.ue_ip,value:n.total,color:I[r%I.length]})),[M]),f=j.useMemo(()=>M.reduce((n,r)=>({uplink:n.uplink+r.uplink,downlink:n.downlink+r.downlink,total:n.total+r.total,packetsUL:n.packetsUL+r.packetsUL,packetsDL:n.packetsDL+r.packetsDL}),{uplink:0,downlink:0,total:0,packetsUL:0,packetsDL:0}),[M]);return t.length===0?e.jsx("div",{className:`h-80 flex items-center justify-center ${g}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:"üìä"}),e.jsx("p",{children:"No active sessions"}),e.jsx("p",{className:`text-sm mt-1 ${s==="dark"?"text-slate-500":"text-gray-400"}`,children:"Session traffic will appear here"})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-sm ${g}`,children:"View:"}),e.jsx("div",{className:`flex ${_} rounded-lg p-1`,children:["bar","pie","trend"].map(n=>e.jsx("button",{onClick:()=>c(n),className:`px-3 py-1 text-sm rounded-md transition-colors ${a===n?"bg-blue-500 text-white":S}`,children:n==="bar"?"üìä Bar":n==="pie"?"ü•ß Pie":"üìà Trend"},n))})]}),a==="bar"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-sm ${g}`,children:"Sort by:"}),e.jsxs("select",{value:i,onChange:n=>m(n.target.value),className:`${F} ${l} text-sm rounded-lg px-3 py-1 border`,children:[e.jsx("option",{value:"total",children:"Total Traffic"}),e.jsx("option",{value:"uplink",children:"Uplink"}),e.jsx("option",{value:"downlink",children:"Downlink"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:`${w} rounded-lg p-3`,children:[e.jsx("div",{className:`text-xs ${g}`,children:"Total Sessions"}),e.jsx("div",{className:`text-xl font-bold ${l}`,children:t.length})]}),e.jsxs("div",{className:`${w} rounded-lg p-3`,children:[e.jsx("div",{className:`text-xs ${g}`,children:"Total Traffic"}),e.jsx("div",{className:`text-xl font-bold ${l}`,children:A(f.total)})]}),e.jsxs("div",{className:`${w} rounded-lg p-3`,children:[e.jsx("div",{className:"text-xs text-green-400",children:"‚Üë Total Uplink"}),e.jsx("div",{className:"text-xl font-bold text-green-400",children:A(f.uplink)})]}),e.jsxs("div",{className:`${w} rounded-lg p-3`,children:[e.jsx("div",{className:"text-xs text-blue-400",children:"‚Üì Total Downlink"}),e.jsx("div",{className:"text-xl font-bold text-blue-400",children:A(f.downlink)})]})]}),e.jsxs("div",{className:"h-72",children:[a==="bar"&&e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(je,{data:M.slice(0,10),layout:"vertical",margin:{top:5,right:30,left:100,bottom:5},children:[e.jsx(Q,{strokeDasharray:"3 3",stroke:C}),e.jsx(q,{type:"number",stroke:d,fontSize:11,tickFormatter:n=>A(n)}),e.jsx(G,{type:"category",dataKey:"ue_ip",stroke:d,fontSize:11,width:90}),e.jsx(V,{contentStyle:{backgroundColor:k,border:`1px solid ${p}`,borderRadius:"8px"},labelStyle:{color:N},formatter:(n,r)=>[A(n),r==="uplink"?"‚Üë Uplink":"‚Üì Downlink"],labelFormatter:n=>`UE IP: ${n}`}),e.jsx(X,{}),e.jsx(ne,{dataKey:"uplink",name:"‚Üë Uplink",fill:"#22c55e",stackId:"stack"}),e.jsx(ne,{dataKey:"downlink",name:"‚Üì Downlink",fill:"#3b82f6",stackId:"stack"})]})}),a==="pie"&&e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(be,{children:[e.jsx(ye,{data:h,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:2,dataKey:"value",label:({name:n,percent:r})=>`${n.split(".").pop()} (${(r*100).toFixed(0)}%)`,labelLine:{stroke:d},children:h.map((n,r)=>e.jsx(ve,{fill:n.color},`cell-${r}`))}),e.jsx(V,{contentStyle:{backgroundColor:k,border:`1px solid ${p}`,borderRadius:"8px",color:N},itemStyle:{color:N},labelStyle:{color:N},formatter:n=>[A(n),"Traffic"]})]})})}),a==="trend"&&e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(xe,{data:P,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(Q,{strokeDasharray:"3 3",stroke:C}),e.jsx(q,{dataKey:"time",stroke:d,fontSize:11}),e.jsx(G,{stroke:d,fontSize:11,tickFormatter:n=>A(n)}),e.jsx(V,{contentStyle:{backgroundColor:k,border:`1px solid ${p}`,borderRadius:"8px"},labelStyle:{color:N},formatter:n=>[A(n)]}),e.jsx(X,{}),t.slice(0,5).map((n,r)=>e.jsx(O,{type:"monotone",dataKey:`session${r}`,name:n.ue_ip,stroke:I[r%I.length],strokeWidth:2,dot:!1,isAnimationActive:!1},n.seid))]})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:`text-sm font-medium ${s==="dark"?"text-slate-300":"text-gray-700"} mb-2`,children:"Session Traffic Details"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:`${g} border-b ${y}`,children:[e.jsx("th",{className:"text-left py-2 px-2",children:"#"}),e.jsx("th",{className:"text-left py-2 px-2",children:"UE IP"}),e.jsx("th",{className:"text-left py-2 px-2",children:"SEID"}),e.jsx("th",{className:"text-right py-2 px-2",children:"‚Üë UL Bytes"}),e.jsx("th",{className:"text-right py-2 px-2",children:"‚Üì DL Bytes"}),e.jsx("th",{className:"text-right py-2 px-2",children:"‚Üë UL Pkts"}),e.jsx("th",{className:"text-right py-2 px-2",children:"‚Üì DL Pkts"}),e.jsx("th",{className:"text-right py-2 px-2",children:"Total"}),e.jsx("th",{className:"text-center py-2 px-2",children:"Share"})]})}),e.jsx("tbody",{children:M.slice(0,10).map((n,r)=>{const v=f.total>0?n.total/f.total*100:0;return e.jsxs("tr",{className:`border-b ${y}/50 ${$}`,children:[e.jsx("td",{className:"py-2 px-2",children:e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:I[r%I.length]}})}),e.jsx("td",{className:"py-2 px-2 font-mono text-cyan-400",children:n.ue_ip}),e.jsx("td",{className:`py-2 px-2 font-mono text-xs ${s==="dark"?"text-slate-500":"text-gray-400"}`,children:n.seid}),e.jsx("td",{className:"py-2 px-2 text-right font-mono text-green-400",children:A(n.uplink)}),e.jsx("td",{className:"py-2 px-2 text-right font-mono text-blue-400",children:A(n.downlink)}),e.jsx("td",{className:"py-2 px-2 text-right font-mono text-green-400/70",children:n.packetsUL.toLocaleString()}),e.jsx("td",{className:"py-2 px-2 text-right font-mono text-blue-400/70",children:n.packetsDL.toLocaleString()}),e.jsx("td",{className:`py-2 px-2 text-right font-mono ${l} font-medium`,children:A(n.total)}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`flex-1 h-2 ${D} rounded-full overflow-hidden`,children:e.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${v}%`,backgroundColor:I[r%I.length]}})}),e.jsxs("span",{className:`text-xs ${g} w-12 text-right`,children:[v.toFixed(1),"%"]})]})})]},n.seid)})})]})}),t.length>10&&e.jsxs("div",{className:`text-center text-sm ${s==="dark"?"text-slate-500":"text-gray-400"} mt-2`,children:["Showing top 10 of ",t.length," sessions"]})]})]})}function Oe({sessions:t,drops:s,theme:a="dark"}){var w;const c=s.total>0,i=t.length>0,m=t.reduce((l,y)=>l+y.packets_ul,0),u=t.reduce((l,y)=>l+y.packets_dl,0),b=t.reduce((l,y)=>l+y.teids.length,0),C=a==="dark"?"text-white":"text-gray-900",d=a==="dark"?"text-slate-300":"text-gray-600",k=a==="dark"?"text-slate-500":"text-gray-400",p=a==="dark"?"text-slate-400":"text-gray-500",N=a==="dark"?"bg-slate-800/50":"bg-gray-100",g=a==="dark"?"bg-slate-700":"bg-gray-200",_=a==="dark"?"border-slate-600":"border-gray-300",S=a==="dark"?"bg-slate-600":"bg-gray-300";return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-4 flex-wrap justify-center",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-16 h-16 md:w-20 md:h-20 rounded-xl flex items-center justify-center text-2xl md:text-3xl transition-all ${i?"bg-green-500/20 border-2 border-green-500 shadow-lg shadow-green-500/20":`${g} border-2 ${_}`}`,children:"üì±"}),e.jsx("span",{className:`mt-2 text-sm font-medium ${d}`,children:"UE"}),t.length>0&&e.jsx("span",{className:"text-xs text-cyan-400 font-mono",children:(w=t[0])==null?void 0:w.ue_ip}),t.length>1&&e.jsxs("span",{className:`text-xs ${k}`,children:["+",t.length-1," more"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 md:w-12 h-1 ${i?"bg-gradient-to-r from-green-500 to-green-400":S}`}),e.jsx("div",{className:"flex flex-col items-center px-1 md:px-2",children:e.jsx("span",{className:k,children:"N1/N2"})}),e.jsx("div",{className:`w-8 md:w-12 h-1 ${i?"bg-gradient-to-r from-green-400 to-green-500":S}`})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-16 h-16 md:w-20 md:h-20 rounded-xl flex items-center justify-center text-2xl md:text-3xl transition-all ${i?"bg-green-500/20 border-2 border-green-500 shadow-lg shadow-green-500/20":`${g} border-2 ${_}`}`,children:"üì°"}),e.jsx("span",{className:`mt-2 text-sm font-medium ${d}`,children:"gNB"}),e.jsx("span",{className:`text-xs ${k}`,children:"UERANSIM"})]}),e.jsxs("div",{className:"flex items-center relative",children:[e.jsx("div",{className:`w-8 md:w-16 h-1 ${i?"bg-gradient-to-r from-green-500 to-cyan-500":S}`,children:i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 w-2 h-2 bg-green-400 rounded-full animate-ping"}),e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 w-2 h-2 bg-green-400 rounded-full animate-pulse",style:{animationDelay:"0.5s",left:"50%"}})]})}),e.jsxs("div",{className:"flex flex-col items-center px-1 md:px-2",children:[e.jsx("span",{className:"text-cyan-400 text-xs font-medium",children:"N3"}),e.jsx("span",{className:`${k} text-xs`,children:"GTP-U"}),b>0&&e.jsxs("span",{className:"text-xs text-cyan-400",children:[b," TEIDs"]})]}),e.jsx("div",{className:`w-8 md:w-16 h-1 ${i?"bg-gradient-to-r from-cyan-500 to-blue-500":S}`})]}),e.jsxs("div",{className:"flex flex-col items-center relative",children:[e.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2",children:e.jsx("span",{className:"text-xs bg-purple-500/30 text-purple-400 px-2 py-0.5 rounded-full",children:"eBPF"})}),e.jsxs("div",{className:`w-20 h-20 md:w-24 md:h-24 rounded-xl flex flex-col items-center justify-center border-2 transition-all ${c?"bg-red-500/20 border-red-500 pulse-alert shadow-lg shadow-red-500/30":i?"bg-blue-500/20 border-blue-500 shadow-lg shadow-blue-500/20":`${g} ${_}`}`,children:[e.jsx("span",{className:"text-3xl md:text-4xl",children:"üñ•Ô∏è"}),i&&e.jsxs("div",{className:"flex gap-1 mt-1",children:[e.jsxs("span",{className:"text-xs text-green-400",children:["‚Üë",m]}),e.jsxs("span",{className:"text-xs text-blue-400",children:["‚Üì",u]})]})]}),e.jsx("span",{className:`mt-2 text-sm font-bold ${C}`,children:"UPF"}),e.jsx("span",{className:`text-xs ${p}`,children:"free5GC + gtp5g"}),c&&e.jsxs("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full px-2 py-0.5 animate-bounce",children:["‚ö†Ô∏è ",s.total]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 md:w-12 h-1 ${i?"bg-gradient-to-r from-blue-500 to-green-500":S}`}),e.jsx("div",{className:"flex flex-col items-center px-1 md:px-2",children:e.jsx("span",{className:`${k} text-xs`,children:"N6"})}),e.jsx("div",{className:`w-8 md:w-12 h-1 ${i?"bg-gradient-to-r from-green-500 to-green-400":S}`})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-16 h-16 md:w-20 md:h-20 rounded-xl flex items-center justify-center text-2xl md:text-3xl transition-all ${i?"bg-green-500/20 border-2 border-green-500 shadow-lg shadow-green-500/20":`${g} border-2 ${_}`}`,children:"üåê"}),e.jsx("span",{className:`mt-2 text-sm font-medium ${d}`,children:"DN"}),e.jsx("span",{className:`text-xs ${k}`,children:"Internet"})]})]})}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:p,children:"Active Connection"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 bg-cyan-500 rounded-full"}),e.jsx("span",{className:p,children:"GTP-U Tunnel"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsx("span",{className:p,children:"Packet Drop"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 bg-purple-500 rounded-full"}),e.jsx("span",{className:p,children:"eBPF Monitoring"})]})]}),i&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-4",children:[e.jsxs("div",{className:`${N} rounded-lg p-3 text-center`,children:[e.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:t.length}),e.jsx("div",{className:`text-xs ${k}`,children:"PDU Sessions"})]}),e.jsxs("div",{className:`${N} rounded-lg p-3 text-center`,children:[e.jsx("div",{className:"text-2xl font-bold text-purple-400",children:b}),e.jsx("div",{className:`text-xs ${k}`,children:"Active TEIDs"})]}),e.jsxs("div",{className:`${N} rounded-lg p-3 text-center`,children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:m.toLocaleString()}),e.jsx("div",{className:`text-xs ${k}`,children:"Uplink Packets"})]}),e.jsxs("div",{className:`${N} rounded-lg p-3 text-center`,children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:u.toLocaleString()}),e.jsx("div",{className:`text-xs ${k}`,children:"Downlink Packets"})]})]})]})}function J(t){return t>=1e9?`${(t/1e9).toFixed(2)} GB`:t>=1e6?`${(t/1e6).toFixed(2)} MB`:t>=1e3?`${(t/1e3).toFixed(2)} KB`:`${t} B`}function K(t){return t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}K`:t.toString()}function de(t){return t>=1e3?{value:(t/1e3).toFixed(2),unit:"Gbps"}:t>=1?{value:t.toFixed(2),unit:"Mbps"}:{value:(t*1e3).toFixed(0),unit:"Kbps"}}function Ge({metrics:t,drops:s,sessions:a,theme:c}){const i=de(t.uplink.throughput_mbps),m=de(t.downlink.throughput_mbps),u=t.uplink.packets+t.downlink.packets,b=t.uplink.bytes+t.downlink.bytes,C=a.reduce((w,l)=>w+l.teids.length,0),d=c==="dark"?"bg-slate-800/50":"bg-white",k=c==="dark"?"border-slate-700":"border-gray-200",p=c==="dark"?"text-white":"text-gray-900",N=c==="dark"?"text-slate-400":"text-gray-500",g=c==="dark"?"text-slate-500":"text-gray-400",_=c==="dark"?"text-slate-300":"text-gray-700",S=c==="dark"?"bg-slate-700":"bg-gray-200";return e.jsxs("div",{className:"space-y-6 pb-16",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:`${d} rounded-xl p-5 border ${k} hover:border-green-500/50 transition-colors`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:`${N} text-sm`,children:"Uplink Traffic"}),e.jsx("span",{className:"text-green-400 text-xs font-medium px-2 py-0.5 bg-green-500/20 rounded-full",children:"‚Üë UL"})]}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:`text-3xl font-bold ${p}`,children:i.value}),e.jsx("span",{className:`text-lg ${N}`,children:i.unit})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:`${g} text-xs`,children:"Packets"}),e.jsx("div",{className:"text-green-400 font-mono",children:K(t.uplink.packets)})]}),e.jsxs("div",{children:[e.jsx("div",{className:`${g} text-xs`,children:"Bytes"}),e.jsx("div",{className:`${_} font-mono`,children:J(t.uplink.bytes)})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:`h-1.5 ${S} rounded-full overflow-hidden`,children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-green-400 transition-all duration-500",style:{width:`${b>0?t.uplink.bytes/b*100:50}%`}})}),e.jsxs("div",{className:`text-xs ${g} mt-1`,children:[b>0?(t.uplink.bytes/b*100).toFixed(1):50,"% of total"]})]})]}),e.jsxs("div",{className:`${d} rounded-xl p-5 border ${k} hover:border-blue-500/50 transition-colors`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:`${N} text-sm`,children:"Downlink Traffic"}),e.jsx("span",{className:"text-blue-400 text-xs font-medium px-2 py-0.5 bg-blue-500/20 rounded-full",children:"‚Üì DL"})]}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:`text-3xl font-bold ${p}`,children:m.value}),e.jsx("span",{className:`text-lg ${N}`,children:m.unit})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:`${g} text-xs`,children:"Packets"}),e.jsx("div",{className:"text-blue-400 font-mono",children:K(t.downlink.packets)})]}),e.jsxs("div",{children:[e.jsx("div",{className:`${g} text-xs`,children:"Bytes"}),e.jsx("div",{className:`${_} font-mono`,children:J(t.downlink.bytes)})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:`h-1.5 ${S} rounded-full overflow-hidden`,children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-400 transition-all duration-500",style:{width:`${b>0?t.downlink.bytes/b*100:50}%`}})}),e.jsxs("div",{className:`text-xs ${g} mt-1`,children:[b>0?(t.downlink.bytes/b*100).toFixed(1):50,"% of total"]})]})]}),e.jsxs("div",{className:`${d} rounded-xl p-5 border transition-colors ${s.rate_percent>1?"border-red-500 pulse-alert":s.rate_percent>0?"border-yellow-500/50":`${k} hover:border-green-500/50`}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:`${N} text-sm`,children:"Drop Rate"}),e.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${s.rate_percent>1?"text-red-400 bg-red-500/20":s.rate_percent>0?"text-yellow-400 bg-yellow-500/20":"text-green-400 bg-green-500/20"}`,children:s.rate_percent>1?"‚ö†Ô∏è Critical":s.rate_percent>0?"‚ö†Ô∏è Warning":"‚úì OK"})]}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:`text-3xl font-bold ${s.rate_percent>0?"text-red-400":p}`,children:s.rate_percent.toFixed(3)}),e.jsx("span",{className:`text-lg ${N}`,children:"%"})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:`${g} text-xs`,children:"Total Drops"}),e.jsx("div",{className:"text-red-400 font-mono",children:K(s.total)})]}),e.jsxs("div",{children:[e.jsx("div",{className:`${g} text-xs`,children:"Reasons"}),e.jsx("div",{className:`${_} font-mono`,children:Object.keys(s.by_reason||{}).length})]})]}),Object.keys(s.by_reason||{}).length>0&&e.jsx("div",{className:"mt-3 flex gap-1",children:Object.entries(s.by_reason).slice(0,3).map(([w,l],y)=>e.jsx("div",{className:"flex-1 h-1.5 rounded-full",style:{backgroundColor:["#ef4444","#f97316","#eab308"][y],opacity:.5+l/s.total*.5},title:`${w}: ${l}`},w))})]}),e.jsxs("div",{className:`${d} rounded-xl p-5 border ${k} hover:border-cyan-500/50 transition-colors`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:`${N} text-sm`,children:"Active Sessions"}),e.jsx("span",{className:"text-cyan-400 text-xs font-medium px-2 py-0.5 bg-cyan-500/20 rounded-full",children:"PDU"})]}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:`text-3xl font-bold ${p}`,children:a.length}),e.jsx("span",{className:`text-lg ${N}`,children:"sessions"})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:`${g} text-xs`,children:"TEIDs"}),e.jsx("div",{className:"text-purple-400 font-mono",children:C})]}),e.jsxs("div",{children:[e.jsx("div",{className:`${g} text-xs`,children:"UE IPs"}),e.jsx("div",{className:`${_} font-mono`,children:new Set(a.map(w=>w.ue_ip)).size})]})]}),e.jsxs("div",{className:"mt-3 flex gap-1",children:[a.slice(0,8).map((w,l)=>e.jsx("div",{className:"w-2 h-2 bg-cyan-400 rounded-full",title:`${w.seid}: ${w.ue_ip}`},l)),a.length>8&&e.jsxs("span",{className:`text-xs ${g}`,children:["+",a.length-8]})]})]})]}),e.jsxs("div",{className:`${d} rounded-xl p-4 border ${k} flex flex-wrap justify-center gap-8`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-sm ${g}`,children:"Total Packets"}),e.jsx("div",{className:`text-xl font-bold ${p}`,children:K(u)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-sm ${g}`,children:"Total Bytes"}),e.jsx("div",{className:`text-xl font-bold ${p}`,children:J(b)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-sm ${g}`,children:"Combined Throughput"}),e.jsxs("div",{className:`text-xl font-bold ${p}`,children:[(t.uplink.throughput_mbps+t.downlink.throughput_mbps).toFixed(2)," Mbps"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-sm ${g}`,children:"Last Updated"}),e.jsx("div",{className:`text-sm ${_}`,children:t.uplink.last_updated?new Date(t.uplink.last_updated).toLocaleTimeString():"N/A"})]})]}),e.jsxs("div",{className:`${d} rounded-xl p-5 border ${k}`,children:[e.jsx("h2",{className:`text-lg font-semibold ${p} mb-4`,children:"Live Traffic (Last 60s)"}),e.jsx(_e,{metrics:t,theme:c})]}),e.jsxs("div",{className:`${d} rounded-xl p-5 border ${k}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:`text-lg font-semibold ${p}`,children:"Per-Session Traffic Analysis"}),e.jsxs("span",{className:`text-sm ${N}`,children:[a.length," active session",a.length!==1?"s":""]})]}),e.jsx(Ie,{sessions:a,theme:c})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`${d} rounded-xl p-5 border ${k}`,children:[e.jsx("h2",{className:`text-lg font-semibold ${p} mb-4`,children:"Drop Events"}),e.jsx(Ue,{drops:s,sessions:a,theme:c})]}),e.jsxs("div",{className:`${d} rounded-xl p-5 border ${k}`,children:[e.jsx("h2",{className:`text-lg font-semibold ${p} mb-4`,children:"PDU Sessions (SEID ‚Üî TEID)"}),e.jsx(Be,{theme:c})]})]}),e.jsxs("div",{className:`${d} rounded-xl p-5 border ${k}`,children:[e.jsx("h2",{className:`text-lg font-semibold ${p} mb-4`,children:"Network Topology"}),e.jsx(Oe,{sessions:a,drops:s,theme:c})]})]})}const Ve={uplink:{packets:0,bytes:0,throughput_mbps:0,last_updated:""},downlink:{packets:0,bytes:0,throughput_mbps:0,last_updated:""}},ze={total:0,rate_percent:0,recent_drops:[],by_reason:{}};function Ke(){const[t,s]=j.useState(Ve),[a,c]=j.useState(ze),[i,m]=j.useState([]),[u,b]=j.useState(!1),[C,d]=j.useState(null),k=j.useRef(null),p=j.useRef(null),N=j.useCallback(()=>{var _;if(((_=k.current)==null?void 0:_.readyState)!==WebSocket.OPEN)try{k.current=Te(S=>{b(!0),d(null),S.data&&(S.data.traffic&&s(S.data.traffic),S.data.drops&&c(S.data.drops))},S=>{console.error("WebSocket error:",S),d("WebSocket connection error"),b(!1)},()=>{b(!1),p.current=window.setTimeout(()=>{N()},3e3)})}catch{d("Failed to create WebSocket connection"),g()}},[]),g=j.useCallback(async()=>{try{const[_,S,w]=await Promise.all([Ce(),De(),ue()]);console.log("useMetrics poll:",{uplink_mbps:_.uplink.throughput_mbps,downlink_mbps:_.downlink.throughput_mbps,uplink_pkts:_.uplink.packets}),s(_),c({...S,recent_drops:S.recent_drops||[],by_reason:S.by_reason||{}}),m(w.sessions||[]),d(null)}catch{d("Failed to fetch metrics")}},[]);return j.useEffect(()=>{g(),N();const _=setInterval(g,2e3);return()=>{clearInterval(_),p.current&&clearTimeout(p.current),k.current&&k.current.close()}},[N,g]),{metrics:t,drops:a,sessions:i,connected:u,error:C}}function We(){const{metrics:t,drops:s,sessions:a,connected:c,error:i}=Ke(),[m,u]=j.useState("offline"),[b,C]=j.useState("data"),[d,k]=j.useState(()=>localStorage.getItem("theme")||"dark");j.useEffect(()=>{u(c&&!i?"online":i?"warning":"offline")},[c,i]),j.useEffect(()=>{document.documentElement.classList.toggle("light",d==="light"),localStorage.setItem("theme",d)},[d]);const p=()=>{k(N=>N==="dark"?"light":"dark")};return e.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${d==="dark"?"bg-cndi-dark":"bg-gray-100"}`,children:[e.jsx("header",{className:`border-b px-6 py-4 transition-colors duration-300 ${d==="dark"?"bg-slate-800/50 border-slate-700":"bg-white border-gray-200 shadow-sm"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-400 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"5G"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-xl font-bold ${d==="dark"?"text-white":"text-gray-900"}`,children:"5G Observability Platform"}),e.jsx("p",{className:`text-sm ${d==="dark"?"text-slate-400":"text-gray-500"}`,children:"Real-time Network Monitoring & Analytics"})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>C("data"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${b==="data"?"bg-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"üìä Data Plane"}),e.jsxs("button",{disabled:!0,className:`px-4 py-2 rounded-lg text-sm font-medium cursor-not-allowed relative group ${d==="dark"?"bg-slate-700/50 text-slate-500":"bg-gray-200 text-gray-400"}`,title:"Coming Soon",children:["üîß Control Plane",e.jsx("span",{className:"absolute -top-2 -right-2 px-1.5 py-0.5 text-[10px] bg-yellow-500 text-yellow-900 rounded-full font-bold",children:"Soon"})]})]}),e.jsx("div",{className:`h-6 w-px ${d==="dark"?"bg-slate-600":"bg-gray-300"}`}),e.jsx("button",{onClick:p,className:`p-2 rounded-lg transition-all ${d==="dark"?"bg-slate-700 hover:bg-slate-600 text-yellow-400":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,title:d==="dark"?"Switch to Light Mode":"Switch to Dark Mode",children:d==="dark"?e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})}),e.jsx("div",{className:`h-6 w-px ${d==="dark"?"bg-slate-600":"bg-gray-300"}`}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${m==="online"?"bg-green-500":m==="warning"?"bg-yellow-500":"bg-red-500"}`}),e.jsx("span",{className:`text-sm ${d==="dark"?"text-slate-300":"text-gray-600"}`,children:m==="online"?"System Online":m==="warning"?"Partial Connection":"Offline"})]}),e.jsx("div",{className:`text-sm ${d==="dark"?"text-slate-400":"text-gray-500"}`,children:new Date().toLocaleTimeString()})]})]})}),e.jsxs("main",{className:"p-6",children:[i&&e.jsxs("div",{className:`mb-4 p-4 border rounded-lg ${d==="dark"?"bg-red-500/10 border-red-500/50 text-red-400":"bg-red-50 border-red-200 text-red-600"}`,children:["‚ö†Ô∏è Connection Error: ",i,". Make sure the API server is running."]}),e.jsx(Ge,{theme:d,metrics:t,drops:s,sessions:a})]}),e.jsx("footer",{className:`fixed bottom-0 left-0 right-0 border-t px-6 py-2 transition-colors duration-300 ${d==="dark"?"bg-slate-800/50 border-slate-700":"bg-white border-gray-200"}`,children:e.jsxs("div",{className:`flex items-center justify-between text-sm ${d==="dark"?"text-slate-400":"text-gray-500"}`,children:[e.jsx("span",{children:"free5GC v4.1.0 | gtp5g Kernel Module"}),e.jsxs("span",{children:["WebSocket: ",c?"üü¢ Connected":"üî¥ Disconnected"]})]})})]})}Z.createRoot(document.getElementById("root")).render(e.jsx(ge.StrictMode,{children:e.jsx(We,{})}));
